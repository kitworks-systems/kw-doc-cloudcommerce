Описание API
=============


Общие сведения
--------------

Все запросы работают через общий префикс


.. code-block:: text

   https://api.cloudcommerce.zd.ua/wms/v1


Тестовый ключ


.. code-block:: text

   83F5428CBAE296FFE0509CB9CB2A24EB


.. note::

   В официальном описании API часто даются примеры где параметры указаны без префикса
   `p_` на самом деле все параметры содержат этот префикс


Используется два метода запросов `GET` и `POST` на чтение и изменении соответственно


GET запросы
~~~~~~~~~~~


.. http:get:: https://api.cloudcommerce.zd.ua/wms/v1/(string:MethodName)?APIKEY=(string:APIKEY)&(string:PARAMS)

    :query string MethodName:  наименование вызываемого метода
    :query string API_KEY:  уникальный ключ доступа
    :query string PARAMS: дополнительные параметры, разделяемые знаком & (зависит от метода)


.. sourcecode:: json

    {
        "response": {},
        "status": {
            "code": "ok"
        }
    }


.. note::

   В GET запросах PARAMS не отрабатывает и возвращается полный список


POST запросы
~~~~~~~~~~~~

Запросы на изменение имеет имя, которое отличается, от запроса на список, а также имеют
структуру JSON, которая не совпадает, даже могут присутствовать параметры,
которые нельзя получить из списка


В заголовке запроса указывается параметр `Content-Type` со значением `application/json` -
в теле запроса передаются данные в формате JSON с указанием необходимых параметров


.. http:post:: https://api.cloudcommerce.zd.ua/wms/v1/(string:MethodName)

    :query string MethodName:  наименование вызываемого метода


Ключа надо передавать в списке параметров с именем `p_api_key`


.. sourcecode:: json

    {
        "p_api_key": "83F5428CBAE296FFE0509CB9CB2A24EB",
    }


В случае успешного завершения всегда возвращается параметр, создержащий ID


.. sourcecode:: json
    {
        "response":
            {
                "p_id": 1010862
            },
        "status":
            {
                "code": "ok"
        }
    }


Ошибки
------

Ошибки возвращают статус 4хх или 5хх и JSON


.. sourcecode:: json

    {
        "response": {},
        "status": {
            "code": "error",
            "message": "Текст описания ошибки"
        }
    }


.. note::

   Важно заметить что, если по вашему запросу не найдено записей, например,
   справочник не заполен, то вы получите ошибку с кодом `404`, не пустой
   список, как ожидалось
